<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta Pokemon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/images/favicon-16x16.png">
</head>
<body>
    <main>
        <div class="container">
            <input type="text" id="pokemonName" placeholder="Digite o nome do Pokémon" list="pokemon-list">
            <datalist id="pokemon-list"></datalist>
            <button id="searchButton">Buscar</button>
            <div id="pokemonInfo" class="pokemon-info">

            </div>
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const datalist = document.getElementById('pokemon-list');

            try {
                const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=2000');
                const data = await response.json();

                data.results.forEach(pokemon => {
                   const option = document.createElement('option');
                    option.value = capitalizeFirstLetter(pokemon.name);
                    datalist.appendChild(option);
                });
            } catch (error) {
                console.error('Erro ao carregar lista de Pokémon:', error);
            }
        });
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        document.getElementById('searchButton').addEventListener('click', fetchPokemon);

        async function fetchPokemon() {
            const pokemonNameInput = document.getElementById('pokemonName');
            const pokemonName = pokemonNameInput.value.toLowerCase();
            const pokemonInfoDiv = document.getElementById('pokemonInfo');

            if (!pokemonName) {
                pokemonInfoDiv.innetHTML = '<p>Por favor, digite o nome de um Pokémon.</p>';
                return;
            }
            pokemonInfoDiv.innetHTML = '<p>Buscando Pokémon. . .</p>';

            try {
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonName}`);
                if (!response.ok) {
                    throw new Error('Pokémon não encontrado');
                }
                const data = await response.json();

                let pkmnormal;
                let pkmshiny;
                if(data.sprites.versions['generation-v']['black-white'].animated.front_shiny != null){
                    pkmnormal=data.sprites.versions['generation-v']['black-white'].animated.front_default
                    pkmshiny=data.sprites.versions['generation-v']['black-white'].animated.front_shiny
                } else {
                    pkmnormal=data.sprites.front_default;
                    pkmshiny=data.sprites.front_shiny;
                }
                pokemonInfoDiv.innerHTML = `
                    <h2>${capitalizeFirstLetter(data.name)}</h2>
                    <img src="${pkmnormal}" alt="${data.name}">
                    <img src="${pkmshiny}" alt="${data.name}">
                    <p><strong>ID:</strong> ${data.id}</p>
                    <p><strong>Altura:</strong> ${data.height / 10} m</p>
                    <p><strong>Peso:</strong> ${data.weight / 10} kg</p>
                    <p><strong>Tipos:</strong> ${data.types.map(typeInfo => capitalizeFirstLetter(typeInfo.type.name)).join(', ')}</p>
                    <p><strong>Habilidades:</strong></p> ${data.abilities.map(abilityInfo => capitalizeFirstLetter(abilityInfo.ability.name)).join(', ')}</p>
                `;
            } catch (error) {
                pokemonInfoDiv.innerHTML = `<p style="color: red;">${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
